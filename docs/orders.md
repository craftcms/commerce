# Orders

When a cart is completed, it becomes an order. You can view orders in the Commerce → Orders section of the Control Panel.

Orders are an [Element Type](https://docs.craftcms.com/v3/extend/element-types.html) and can have custom field associated with them.

To see how to get order information in templates, and learn of all the properties of an order look at 
the <api:craft\commerce\elements\Order> class reference.

# Carts become orders

When a cart becomes an order, the following things happen:

1) The `dateOrdered` order attribute is set to the current date.
2) The `isCompleted` order attribute is set to `true`.
3) The default [order status](custom-order-statuses.md) is set on the order and any emails for this status are sent.
4) The order reference number is generated for the order, based on the ‘Order Reference Number Format‘ setting found in Commerce → Settings → General Settings section of the Control Panel. 

## Order Numbers

You can identify an order in three ways. By the order number, short order number, and order reference number.

### Order Number

The order number is a hash, generated when the cart is created in the session, which exists in the users session, even before the cart is saved 
in the database. It exists from initial creation of the cart, for the entire life of the order.  

This is different to the order reference number that is only generated after the cart has been completed and becomes an order. 

We recommend using the order number when referencing the order in URLs or anytime the order is retrieved publicly. 

### Short Order Number

The short order number is the first 7 characters of the order number. 
This is short enough to still be unique, and is a little friendlier to customers, although not as friendly as the order reference number.

### Order Reference Number

The order reference number is generated on cart completion by the ‘Order Reference Number Format’ in general settings.

This number is usually the best to use as the customer facing identifier of the order, but shouldn't be used in URLs.

```twig
{{ object.reference }}
```

The ‘Order Reference Number Format’ is a mini Twig template, which will be rendered when the order is completed.

Attributes on the order can be accessed as well as Twig filters and functions, for example:

```twig
{{ object.dateCompleted|date('Y') }}-{{ id }}
```

Ouput:
```
2018-43
```

Please note in the above example, the ID is the element ID, which is not sequential.

A sequential number can be generated by the use of Craft’s [seq()](https://docs.craftcms.com/v3/dev/functions.html#seq-name-length-next) Twig function, which generates a next unique number based on the `name` parameter passed to it.

The `seq()` function takes the following parameters:

1. A key name. If this name is changed, a new sequence starting at one is started. See Craft docs for more information.
2. An optional padding character length. For example if the next sequence number is `14` and the padding length is `8`, the generation number will be `00000014` 

For example:
```twig
{{object.dateCompleted|date('Y')}}-{{ seq(object.dateCompleted|date('Y'), 8) }}
```

Ouput:
```
2018-00000023
```

In the above example we have used the year as the sequence name so that we automatically get a new sequence starting at 1 when the next year arrives.

## Creating and editing orders

### Creating orders

Orders are usually created by customer on the front-end as [carts](cart.md) when they [add items](adding-to-and-updating-the-cart.md), 
but they can also be created in the control panel.

To create a new order, go to Commerce → Orders, and click “New Order”. This will create a new order that behaves like a cart. 
Purchasables can be added and removed from the order and it will automatically recalculate it’s sales and [adjustments].

To complete the order, click the “Mark as complete” button to save the order and mark it as complete. This will set the default order status, current date ordered, and 
generate a order reference number. 

::: tip
 You must have the “Edit Orders” permission to create orders in the control panel.
:::

### Editing orders

Orders can be edited in the control panel by visiting the order edit page and clicking the “Edit” button. This will place you into 
edit mode where you can change values within the order.

While editing the order, the order will refresh subtotals and totals, and display any errors, but it will not automatically 
recalculate the order based on system rules like shipping, taxes, or promotions. If you want the order to fully recalculate, 
click the “Recalculate Order” button to recalculate the order.
 
Once you are happy with your changes, you can click “Update Order”.